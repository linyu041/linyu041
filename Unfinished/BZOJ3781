#include<bits/stdc++.h>
using namespace std;
#define U(i,j,k) for(int i=j;i<=k;++i)
const int SIZE=225,N=50005;
int a[N],n,m,k;
int cnt[N];
struct Ask
{
	int l,r,bl,id;

}b[N];
long long res[N];
int cmp(Ask x,Ask y)
{
	return x.bl!=y.bl?x.bl<y.bl:x.r<y.r;
}
void Solve()
{
	int l=0,r=0;
	long long ans=0;
	U(i,1,m)
	{
		cout<<b[i].l<<" "<<b[i].r<<endl; 
	}
	cout<<endl;
	for(int i=1;i<=m;++i)
	{
		cout<<l<<" "<<r<<endl;
		while(l<b[i].l)	
		{
			ans-=(cnt[a[l]]*cnt[a[l]]);
			--cnt[a[l]];
			ans+=(cnt[a[l]]*cnt[a[l]]);
			++l;
		}
		while(r<b[i].r)
		{
			ans-=(cnt[a[l]]*cnt[a[l]]);
			++cnt[a[r]];
			ans+=(cnt[a[l]]*cnt[a[l]]);
			++r;
		}
		while(l>b[i].l)
		{
			ans-=(cnt[a[l]]*cnt[a[l]]);
			++cnt[a[l]];
			ans+=(cnt[a[l]]*cnt[a[l]]);
			ans+=a[l]*a[l];--l;
		}
		while(r>b[i].r)
		{
			ans-=(cnt[a[l]]*cnt[a[l]]);
			--cnt[a[r]];
			ans+=(cnt[a[l]]*cnt[a[l]]);
			ans-=a[r]*a[r];--r;
		}
		res[b[i].id]=ans;
	}
	U(i,1,m)
	{
		printf("%d\n",res[i]);
	}
}
int main()
{
	scanf("%d%d%d",&n,&m,&k);
	for(int i=1;i<=n;++i)
	{
		scanf("%d",&a[i]);
	}
	U(i,1,m)
	{
		scanf("%d%d",&b[i].l,&b[i].r);
		b[i].id=i;
		b[i].bl=(b[i].l-1)/SIZE+1;
	}
	sort(b+1,b+1+m,cmp);
	Solve();
	return 0;
}
